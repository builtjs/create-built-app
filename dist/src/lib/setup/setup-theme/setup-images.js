"use strict";const a36_0x176377=a36_0x5b37;function a36_0x5b37(n,t){const r=a36_0xd9b4();return(a36_0x5b37=function(n,t){return r[n-=255]})(n,t)}!function(){const n=a36_0x5b37,t=a36_0xd9b4();for(;;)try{if(965545===parseInt(n(362))/1*(parseInt(n(418))/2)+parseInt(n(373))/3+-parseInt(n(309))/4+-parseInt(n(312))/5*(parseInt(n(265))/6)+parseInt(n(259))/7+parseInt(n(352))/8*(-parseInt(n(367))/9)+-parseInt(n(306))/10*(-parseInt(n(396))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const a36_0x513111=a36_0x3ad3;!function(){const n=a36_0x5b37,t={IBdaX:function(n){return n()},LHeSU:function(n,t){return n===t},JprHx:function(n,t){return n+t},QEXYf:function(n,t){return n+t},NJmFp:function(n,t){return n(t)},DXaSA:function(n,t){return n/t},hroVy:function(n,t){return n(t)},NBiMR:function(n,t){return n/t},RQsMc:function(n,t){return n(t)},oVTBn:function(n,t){return n*t},LYVLi:function(n,t){return n/t},rSZqm:function(n,t){return n(t)},RjxvO:function(n,t){return n(t)},vNEiu:function(n,t){return n(t)},pKIhu:function(n,t){return n*t},Nibzp:function(n,t){return n/t},nRBSP:function(n,t){return n(t)},ZJlsY:function(n,t){return n(t)}},r=a36_0x3ad3,e=t.IBdaX(a36_0x58a6);for(;;)try{if(t[n(408)](991702,t[n(400)](t[n(342)](t[n(400)](t[n(400)](t[n(400)](-t.NJmFp(parseInt,r(162))/1*t[n(289)](-parseInt(t[n(322)](r,152)),2),t.DXaSA(parseInt(r(154)),3)),t[n(409)](-t.RQsMc(parseInt,t.hroVy(r,179)),4)),t[n(295)](t[n(298)](parseInt(t[n(282)](r,175)),5),parseInt(t[n(417)](r,177))/6))+parseInt(t[n(297)](r,140))/7*t.DXaSA(-parseInt(t[n(322)](r,192)),8),t.NBiMR(t.hroVy(parseInt,t[n(296)](r,166)),9)),t.pKIhu(t[n(281)](t[n(383)](parseInt,t[n(296)](r,168)),10),t.DXaSA(-t.ZJlsY(parseInt,r(141)),11)))))break;e[n(411)](e[n(345)]())}catch(t){e[n(411)](e[n(345)]())}}();var __importDefault=this&&this[a36_0x513111(142)]||function(n){return n&&n[a36_0x513111(138)]?n:{default:n}};Object[a36_0x513111(153)](exports,"__esModule",{value:!0}),exports[a36_0x176377(340)]=updateImagesForThemeOrPlugin,exports[a36_0x513111(191)]=updateImages;const fs_1=require("fs"),path_1=__importDefault(require(a36_0x176377(407))),pluralize_1=__importDefault(require(a36_0x513111(187))),file_utils_1=require(a36_0x513111(164));async function readJsonFile(n){const t=a36_0x176377,r={aBkvR:function(n,t){return n(t)},TZHmN:function(n,t){return n(t)}},e=a36_0x513111,u=await fs_1[t(336)][r[t(264)](e,135)](n,r[t(316)](e,143));return JSON[r[t(264)](e,193)](u)}function findImageFieldsInGlobal(n){const t=a36_0x176377,r={Cakps:function(n,t){return n(t)}},e=a36_0x513111;return Object[r.Cakps(e,170)](n[r[t(308)](e,176)])[r[t(308)](e,165)]((t=>n[e(176)][t][e(155)]===e(190)))}function findImageFieldsInSections(n){const t=a36_0x176377,r={sZLVE:function(n,t){return n>t},HDHtq:function(n,t){return n(t)}},e=a36_0x513111,u={AYGYf:function(n,t){return r[a36_0x5b37(349)](n,t)}},o={};for(const i in n){const c=n[i][r[t(368)](e,176)];if(c){const n=Object.keys(c)[r.HDHtq(e,165)]((n=>"image"===c[n][e(155)]));u[e(149)](n[r[t(368)](e,134)],0)&&(o[i]={fields:n})}}return o}function findImageFieldsInElements(n){const t=a36_0x176377,r={wyGJm:function(n,t){return n>t},QZxir:function(n,t){return n(t)},IiqGW:function(n,t){return n(t)},McHzL:function(n,t){return n(t)},PYlvq:function(n,t){return n(t)}},e=a36_0x513111,u={ySHgf:function(n,t){return r.wyGJm(n,t)}},o={};for(const i of n){const n=i[e(176)];if(n){const c=Object[r[t(412)](e,170)](n)[r[t(399)](e,165)]((r=>t(333)===n[r][e(155)]));u[r[t(389)](e,174)](c.length,0)&&(o[i[r[t(410)](e,145)]]={fields:c})}}return o}function a36_0x58a6(){const n=a36_0x176377,t={Dvszn:n(261),iACFQ:n(395),UUwzz:n(375),dmjNh:"fBnwG",VCNRo:n(430),YLhQc:n(318),RqAkf:n(302),PQsKS:n(333),WOGKd:"6796744Ennljc",IFcVs:"parse",kFRmA:"collections",kBIJq:"cjJtY",AXmyO:"/schemas/content-types.json",JpVkO:"theme",YSaJn:"BRmzV",pjTnO:n(324),vNDIF:"sections",FkxTh:n(344),CRHRd:n(361),rAzfE:n(279),KvYQP:n(423),jRsiC:n(358),NcRbt:n(331),nnWLK:n(364),srDRF:"forEach",rKvfu:n(300),gKgIK:"data",nrGav:"AYGYf",NDzxN:n(397),rkjKE:n(376),NEnSb:n(398),USjDl:n(370),feFdN:"4191210KuAcyz",rdNrk:"type",pZYmD:n(268),TZbiv:"/schemas/sections.json",FdvIF:n(378),xQEkN:n(374),HXKej:n(272),Jvtas:n(274),TZvOu:n(414),xLcqi:n(387),RVCAZ:n(377),ZfQsO:"VgBYO",cYIQF:n(320),MIkXf:n(293),WWFTJ:n(379),pxaqu:n(392),TGSmS:n(401),WBTfo:n(353),KTGEW:"36DhFhbA",pSSPg:n(288),oIPVr:n(431)},r=[t[n(263)],n(255),t[n(369)],t[n(354)],t[n(416)],n(424),t[n(413)],t.YLhQc,t[n(427)],t[n(393)],n(420),t[n(363)],t[n(394)],t[n(337)],n(256),t.kBIJq,n(283),t[n(307)],t[n(311)],t[n(390)],n(275),"length",t.pjTnO,t[n(415)],t[n(347)],t[n(346)],t[n(328)],t[n(313)],t[n(350)],t[n(403)],t.nnWLK,n(277),n(294),t.srDRF,t[n(384)],t.gKgIK,t[n(359)],t[n(404)],t.rkjKE,t[n(355)],t[n(339)],t[n(315)],t[n(381)],t[n(270)],t[n(356)],t[n(273)],t[n(365)],t.HXKej,t[n(366)],n(323),n(407),t.TZvOu,t.xLcqi,t[n(290)],t[n(335)],t.cYIQF,n(419),t.MIkXf,"has",t.WWFTJ,t[n(310)],t[n(258)],t[n(301)],"fields",t[n(371)],t[n(304)],t[n(426)],n(317)];return(a36_0x58a6=function(){return r})()}function findImageFieldsInContentTypes(n){const t=a36_0x176377,r={PmwEB:function(n,t){return n>t},rwPRh:function(n,t){return n(t)},CFEbn:function(n,t){return n(t)},btvXE:function(n,t){return n(t)}},e=a36_0x513111,u={DLebI:function(n,t){return r.PmwEB(n,t)}},o={};for(const i of n){const n=i[r[t(372)](e,176)];if(n){const c=Object.keys(n)[t(387)]((r=>t(333)===n[r][e(155)]));u[r.CFEbn(e,172)](c[r[t(391)](e,134)],0)&&(o[i[r[t(271)](e,145)]]={fields:c})}}return o}function a36_0xd9b4(){const n=["HYCJM","hroVy","1547xxMaTm","readFile","Fepsh","tjuuF","eUSDE","rAzfE","VnTkH","DXcYA","__importDefault","includes","image","JfPtV","ZfQsO","promises","kFRmA","gaMdd","USjDl","updateImagesForThemeOrPlugin","HiefZ","QEXYf","yOpZt","./public","shift","CRHRd","FkxTh","BZwxk","sZLVE","jRsiC","xodBU","8wuBldh","270255IdSluv","UUwzz","NEnSb","TZbiv","FuiGR","12191729gmdeKI","nrGav","VErBJ","__esModule","1363082zpbCvs","WOGKd","utf-8","xQEkN","Jvtas","3412845hPZubp","HDHtq","iACFQ","defineProperty","KTGEW","rwPRh","1351656apsZFi","Khmeo","join","isArray","3991482sjvgoN","Failed to load content types schema from ","DLebI","XciqN","rdNrk","Jxvpy","nRBSP","rKvfu","VkdIu","XBuOS","filter","nezrp","McHzL","YSaJn","btvXE","singular","PQsKS","IFcVs","/plugins/","324247VlzyJD","downloadImage","2560iDnVbr","IiqGW","JprHx","ySHgf","VZeDN","NcRbt","NDzxN","zJfsY","shGNB","path","LHeSU","NBiMR","PYlvq","push","QZxir","VCNRo","../setup-site/file-utils","vNDIF","dmjNh","RjxvO","2XDZMdo","Failed to load sections schema from ","updateImages","zmvgC","jBYZf","7Ucbqol","resolve","USlRg","oIPVr","RqAkf","UwlNq","WMdLE","pluralize","348244hRhIRT","ShBvo","default","kQOJQ","TGSmS","2742376jbLMfz","XkIGY","VjkHD","mIEIL","Dvszn","aBkvR","1081554sdVmxq","xroDV","sxAbC","elements","LzfnA","pZYmD","CFEbn","/schemas/elements.json","FdvIF","map","contentTypes","ySmHS","ycTkT","pBVfr","url","IcyqO","Nibzp","rSZqm","plugins","cjJtY","/schemas/global.json","gRuDg","EKkyD","XASIn","DXaSA","RVCAZ","XSBCw","nGBti","keys","name","oVTBn","vNEiu","NJmFp","LYVLi","kiybo","add","WBTfo","public/data","gbpcA","pSSPg","bbOSy","730QOOsVu","AXmyO","Cakps","7002640rejtDw","pxaqu","JpVkO","35cSfGur","KvYQP","WWzBZ","feFdN","TZHmN","global","WSwcy","JJjky","20QMOQFR"];return(a36_0xd9b4=function(){return n})()}function getImageDataFromBuilt(n,t,r,e,u){const o=a36_0x176377,i={tjuuF:function(n,t){return n(t)},VZeDN:function(n,t){return n(t)},ySmHS:function(n,t){return n(t)},LzfnA:function(n,t){return n(t)},nGBti:function(n,t,r){return n(t,r)},gaMdd:function(n,t){return n(t)},gbpcA:function(n,t){return n(t)},yOpZt:function(n,t){return n(t)},xDmXc:function(n,t){return n(t)},VErBJ:function(n,t){return n(t)},kQOJQ:function(n,t){return n(t)},mIEIL:function(n,t){return n(t)}},c=a36_0x513111,a={cjJtY:function(n,t){return n(t)},VnTkH:function(n,t){return i[a36_0x5b37(326)](n,t)}},f=[],s=new Set;function l(n){const t=a36_0x5b37,r=a36_0x3ad3;!s[i[t(326)](r,171)](n[r(163)])&&(f[t(411)](n),s[i[t(326)](r,147)](n[t(407)]))}if(n[i.ySmHS(c,180)]&&t){const r=n[i[o(257)](c,180)];t[i[o(262)](c,146)]((n=>{const t=o,e=c,u=r[n];u&&u[e(163)]&&u[i[t(326)](e,139)]&&a[e(196)](l,u)}))}return n[c(136)][i[o(262)](c,146)]((n=>{const t=o,e={zmvgC:function(n,t){return i[a36_0x5b37(269)](n,t)},HYCJM:function(n,t,r){return i[a36_0x5b37(292)](n,t,r)},xroDV:function(n,t){return i[a36_0x5b37(338)](n,t)},eUSDE:function(n,t){return n(t)},WWzBZ:function(n,t,r){return i[a36_0x5b37(292)](n,t,r)}},f=c,s=function(n,t){return a[a36_0x5b37(284)](n,t)};if(n[i.LzfnA(f,148)]){const o=n[i[t(303)](f,145)];r[o]&&r[o][i.yOpZt(f,176)][f(146)]((r=>{const u=t,o=f,i=n[e[u(421)](o,148)][r];i&&i[e.zmvgC(o,163)]&&i[u(279)]&&e[u(321)](s,l,i)})),Object[t(293)](n[i[t(343)](f,148)])[i.LzfnA(f,161)]((o=>{const c=t,p=f;if(Array[i.tjuuF(p,151)](n[i[c(326)](p,148)][o])){let t=pluralize_1[i.tjuuF(p,195)][p(173)](o);n[i[c(402)](p,148)][o][i[c(402)](p,146)]((n=>{const r=c,o=p;for(const i in n)if(u[t]&&u[t][e[r(421)](o,176)]&&u[t][e[r(421)](o,176)][r(332)](i)){const t=n[i];t&&t[e[r(266)](o,163)]&&t[e[r(327)](o,139)]&&e[r(314)](s,l,t)}}))}else for(const n in o)if(r[n]){const t=o[n];t&&t[i[c(276)](p,163)]&&t.url&&a.cjJtY(l,t)}}))}})),n[c(201)][i.LzfnA(c,146)]((t=>{const r=o,u={gRuDg:function(n,t){return i[a36_0x5b37(326)](n,t)}},f=c,s={VgBYO:function(n,t){return a[a36_0x5b37(329)](n,t)}},p=t.name;e[p]&&e[p][i[r(360)](f,176)].forEach((t=>{const e=r,o=f,c=(0,pluralize_1[i[e(269)](o,195)])(p),a=n[i.xDmXc(o,194)][c];Array[o(151)](a)&&a[i[e(402)](o,146)]((n=>{const r=e,i=o,c=n[t];c&&c.path&&c.url&&s[u[r(286)](i,167)](l,c)}))}))})),f}async function downloadAndSaveImages(n,t){const r={nezrp:function(n,t){return n(t)},vyivJ:function(n,t){return n(t)}},e=a36_0x513111,u=r[a36_0x176377(388)](e,137),o=path_1[e(195)][e(186)](t,u);for(const t of n)await(0,file_utils_1[r.vyivJ(e,150)])(t,o)}function a36_0x3ad3(n,t){const r={Fepsh:function(n){return n()}}[a36_0x176377(325)](a36_0x58a6);return(a36_0x3ad3=function(n,t){return r[n-=134]})(n,t)}async function updateImagesForThemeOrPlugin(n,t,r,e,u){const o=a36_0x176377,i={XciqN:function(n,t,r){return n(t,r)},UwlNq:function(n,t,r,e,u){return n(t,r,e,u)},EKkyD:function(n,t){return n(t)},Jxvpy:function(n,t){return n(t)}},c=a36_0x513111,a={WSwcy:function(n,t,r){return i[a36_0x5b37(380)](n,t,r)},BRmzV:function(n,t){return n===t},VjkHD:function(n,t,r,e,u){return i[a36_0x5b37(428)](n,t,r,e,u)}};if(await a[c(188)](updateImages,r,t),a[c(200)](e,i[o(287)](c,199))&&n[i[o(382)](c,197)])for(const e of n[i.Jxvpy(c,197)])await a[c(181)](updateImages,r,t,e,!0)}async function updateImages(n,t,r,e){const u=a36_0x176377,o={JJjky:function(n,t){return n(t)},sxAbC:function(n,t){return n(t)},zJfsY:function(n,t){return n(t)},kDUIW:function(n,t,r,e,u,o){return n(t,r,e,u,o)},DXcYA:function(n,t,r){return n(t,r)},BZwxk:function(n,t){return n(t)},JfPtV:function(n,t){return n(t)},XSBCw:function(n,t){return n+t},XBuOS:function(n,t){return n+t},VkdIu:u(302),kiybo:function(n,t){return n(t)},shGNB:function(n,t){return n+t},pBVfr:function(n,t){return n(t)},xodBU:function(n,t){return n(t)},rfiXh:function(n,t){return n(t)},WMdLE:u(285),jBYZf:function(n,t){return n(t)},bbOSy:function(n,t){return n+t},FuiGR:function(n,t){return n(t)},XkIGY:function(n,t){return n(t)},IcyqO:function(n,t){return n(t)},zbQLs:function(n,t){return n(t)},HiefZ:function(n,t){return n(t)},USlRg:function(n,t){return n(t)}},i=a36_0x513111,c={fBnwG:function(n,t){return o.JJjky(n,t)},XASIn:function(n,t){return o.JJjky(n,t)},ycTkT:function(n,t){return o.JJjky(n,t)},ShBvo:function(n,t){return o[u(267)](n,t)},prWhd:function(n,t){return o[u(405)](n,t)},EcbNb:function(n,t,r,e,u,i){return o.kDUIW(n,t,r,e,u,i)},Khmeo:function(n,t,r){return o[u(330)](n,t,r)}};let a="";e&&(a=o[u(348)](i,183)+r);const f=path_1[i(195)][o[u(334)](i,184)](t,o[u(291)](o[u(386)](o[u(385)],a),o[u(348)](i,157))),s=path_1[i(195)][o[u(299)](i,184)](t,o[u(406)](o.XSBCw(o[u(385)],a),o.sxAbC(i,198))),l=path_1.default[o[u(348)](i,184)](t,o[u(406)](i(189)+a,o.JJjky(i,160))),p=path_1[o[u(278)](i,195)][o[u(351)](i,184)](t,o.XSBCw(o.shGNB(o.rfiXh(i,189),a),o[u(429)]));let d,x;try{d=await c[o[u(299)](i,185)](readJsonFile,f)}catch(n){throw new Error(o.shGNB(o[u(319)](i,169),f))}try{x=await c[o[u(422)](i,178)](readJsonFile,s)}catch(n){throw new Error(o[u(305)](o[u(357)](i,158),s))}let I=null;try{I=await c[o[u(260)](i,178)](readJsonFile,l)}catch(n){}let m=null;try{m=await c[o[u(405)](i,144)](readJsonFile,p)}catch(n){}let _=null;m?.[o.XkIGY(i,180)]&&(_=findImageFieldsInGlobal(m[u(317)]));const b=c[o[u(351)](i,182)](findImageFieldsInSections,d[o[u(280)](i,136)]),h=findImageFieldsInContentTypes(x[o.IcyqO(i,201)]),y=I?.[o.zbQLs(i,156)]?c.prWhd(findImageFieldsInElements,I[o[u(341)](i,156)]):{},S=c.EcbNb(getImageDataFromBuilt,n,_,b,h,y);await c[o[u(425)](i,159)](downloadAndSaveImages,S,t)}